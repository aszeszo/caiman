<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en-US">

<!--     -->
<head>
<!-- GenHTML revision 23436-->
<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">
<title>Troubleshooting Issues - OpenSolaris 2010.03 Automated Installer Guide</title>
<meta name="robots" content="index,follow">
<meta name="robots" content="index,follow">
<meta name="date" content="2010-03-01">
<meta name="collection" content="reference">
<link rel="stylesheet" type="text/css" href="css/elements.css">
<link rel="stylesheet" type="text/css" href="css/opensol.css">
</head>

<body>


<div class="Masthead">
   <div class="MastheadLogo">
      <a href="http://www.opensolaris.com"><img border="0" src="graphics/opensolaris_logo_trans.png"></img></a>
   </div>
   <div class="Title">OpenSolaris 2010.03 Automated Installer Guide</div>
</div>
<div class="headerbar"></div>


<table class="Layout" border="0" cellspacing="0" width="100%">
<tbody>

   <tr valign="top" class="PageControls">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="trouble.html">Previous</a>
             </td>
             <td align="right">
                 <a href="faq.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
   
   <tr valign="top">
      <td class="Navigation" width="200px"><p class="toc level1"><a href="docinfo.html">Document Information</a></p>
<p class="toc level1 tocsp"><a href="index.html">1.&nbsp;&nbsp;What's New For Automated Installations</a></p>
<p class="toc level1 tocsp"><a href="intro.html">2.&nbsp;&nbsp;Introduction to the Automated Installer</a></p>
<p class="toc level1 tocsp"><a href="tasks.html">3.&nbsp;&nbsp;Automated Network Install Task Map</a></p>
<p class="toc level1 tocsp"><a href="bootable.html">4.&nbsp;&nbsp;Automated Installations That Boot From Media</a></p>
<p class="toc level1 tocsp"><a href="setup.html">5.&nbsp;&nbsp;Set up an Automated Install Server</a></p>
<p class="toc level1 tocsp"><a href="administer.html">6.&nbsp;&nbsp;How to Administer an Automated Install Server</a></p>
<p class="toc level1 tocsp"><a href="client.html">7.&nbsp;&nbsp;How to Administer a Custom Install Client</a></p>
<p class="toc level1 tocsp"><a href="manifest.html">8.&nbsp;&nbsp;How to Administer Manifest Files</a></p>
<p class="toc level1 tocsp"><a href="clients.html">9.&nbsp;&nbsp;How to Manage Client Installations</a></p>
<p class="toc level1 tocsp"><a href="trouble.html">10.&nbsp;&nbsp;Troubleshooting and FAQs for the Automated Installer</a></p>
<div id="scrolltoc" class="onpage">
<p class="toc level2"><a href="">Troubleshooting Issues</a></p>
</div>
<p class="toc level2"><a href="faq.html">Frequently Asked Questions</a></p>
<p class="toc level2"><a href="help.html">Additional Resources</a></p>
<p class="toc level1 tocsp"><a href="appendix.html">11.&nbsp;&nbsp;Appendix</a></p>
</td>
      <td class="ContentPane" width="705px">

	 <div class="MainContent">      	 
             

<a name="setupfaq"></a><h3>Troubleshooting Issues</h3>


<a name="dhcperr"></a><h4>1. <tt>installadm create-service</tt> Fails</h4>
<p>The following error message is displayed:</p><pre># installadm create-service -n sparc_install_service -i
192.168.135.21 -c 2 -s /export/images/osol-1003-109-ai-sparc.iso
/data/AI/sparc/snv_109
Setting up the target image at /data/AI/sparc/snv_109 ...
Registering the service sparc_install_service._OSInstall._tcp.local
Creating DHCP Server
Created DHCP configuration file.
Dhcptab already exists.
Added server macro to dhcptab - sms1.
dhcpconfig: Error - starting the DHCP server. entity not found
dhtadm: GrubMenu already exists.
pntadm: Table for 192.168.0.10 does not exist.
pntadm: Table for 192.168.0.10 does not exist.
Could not retrieve DHCP information from dhcp server
  Please create a DHCP macro named dhcp_macro_sparc_install_service with:
  Boot server IP (BootSrvA) : 192.168.135.10
  Boot file      (BootFile) : http://192.168.135.10:5555/cgi-bin/wanboot-cgi
Failed to assign DHCP macro to IP address. Please assign manually.
pntadm: Table for 192.168.0.10 does not exist.
pntadm: Table for 192.168.0.10 does not exist.
Creating SPARC configuration file</pre><p>The <tt>installadm</tt> command was not able to set up the network table for
the addresses. Check to see if this problem is due to one of
the following issues:</p>
<ul><li><p>The SMF service, <tt>dhcp-server</tt>, might not be available on the system. Check for the <tt>dhcp-server</tt> by running the following command:</p><pre># <tt>svcs dhcp-server</tt></pre></li>
<li><p>Check whether <tt>/etc/netmasks</tt> has the wrong netmasks for the network that is being set up.</p></li>
<li><p>Check that the node name is set to have the loop back address of <tt>127.0.0.1</tt>.</p></li>
<li><p>The OpenSolaris release on your install server might need to be upgraded. If the OpenSolaris 2010.03 release is installed on your install server, you can use AI images for either the OpenSolaris 2009.06 release or for the OpenSolaris 2010.03 release. Otherwise, the OpenSolaris release installed on your server and the OpenSolaris release for the AI images that you plan to install to client systems must be the same release.</p><p>In addition, if you use an AI ISO image from an OpenSolaris development build to set up an install service, that AI ISO image will have a build number associated with it. This same build number must be specified in the AI manifest for the packages to be installed on the system. If you do not, in the manifest, specify a build number for the packages to be installed, the installation will use the most current version of the packages available in the IPS repository. If the build number for the packages does not match the build number for the AI ISO image, the installation could fail. For further information, see <a href="customai.html#version">Specifying Packages to Install a Specific Version of OpenSolaris</a>.</p></li></ul>
<p>Make any needed corrections to fix the problems that you found. Then, run
the following command to cleanup the failed service.</p><pre><tt>installadm delete-service <tt>-x</tt></tt></pre><p>Then, you can rerun the <tt>installadm create-service</tt> command.</p>

<a name="fails"></a><h4>2. What if the Client Installation Fails?</h4>


<a name="logs"></a><h5>Check the Installation Logs</h5>
<p>If an installation to a client system failed, you can find the
log at <tt>/tmp/install_log</tt>.</p>

<a name="ipscheck"></a><h5>Check IPS Repository</h5>
<p>The install client needs to reach the IPS repository defined in the AI
manifest in order to install the OpenSolaris OS. In a normal configuration, the
DHCP server sends the DNS information to the client. This DNS information is
used to resolve the IPS repository name to an IP address.</p><p>A failed installation can result in an error message. See the following sample
error message:</p><pre>&lt;OM Nov  2 06:56:32> Creating and configuring pkg(5) image area...
    &lt;TRANSFER_MOD Nov  2 06:56:32> pkg cmd: /usr/bin/pkg image-create 
-f -F -p opensolaris.org=http://pkg.opensolaris.org /a
    &lt;TRANSFER_MOD_E Nov  2 06:56:35>
    &lt;TRANSFER_MOD_E Nov  2 06:56:35>
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> pkg image-create: The URI 
'http://pkg.opensolaris.org' does not appear to point to a valid pkg server.
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Please check the server's address and client's 
network configuration.
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Additional details:
    &lt;TRANSFER_MOD_E Nov  2 06:56:35>
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Unable to contact valid package server
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Encountered the following error(s):
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Unable to contact any configured publishers.
This is likely a network configuration problem.
    &lt;TRANSFER_MOD_E Nov  2 06:56:35> Unable to initialize the pkg image area at /a
    ...
    &lt;AI Nov  2 06:56:36> Automated Installation failed in Transfer module
    &lt;AI Nov  2 06:56:36> Transferring the files from the source failed. 
Please see previous messages for more details </pre><p>This error indicates that the client could not resolve the name of
the IPS repository. On the failed machine, try to reach the IPS repository
you have set up. The default repository is <a href="http://pkg.opensolaris.org">http://pkg.opensolaris.org</a> in the AI manifest
for this client.</p><p>Check whether the repository is &ldquo;pingable&rdquo; by running, for example, the following command:</p><pre><tt>ping pkg.opensolaris.org</tt></pre><p>If the command returns the following, the error may be connectivity related:</p><pre>no answer from pkg.opensolaris.org</pre><p>If the command returns the following, the error may be DNS related.</p><pre>ping: unknown host pkg.opensolaris.org</pre>

<a name="dns"></a><h5>Check DNS</h5>
<p>Check whether DNS is configured on your client. First, check whether or not
the DNS server is reachable. Get the server IP addresses by running the
following command:</p><pre><tt>grep ^nameserver /etc/resolve</tt></pre><p>This command outputs lines such as the following:</p><pre>nameserver 192.168.0.1</pre><p>Then, verify that the server at this IP address is reachable by
following the ping instructions above. The output should report as follows:</p><pre>192.168.0.1 is alive</pre><p>If you do not get this response, there is a DNS issue.
Check with your DNS or network administrator.</p><p>You can also check <tt>/etc/resolv.conf</tt>. If <tt>/etc/resolv.conf</tt> is blank, run the following
command:</p><pre>dhcpinfo DNSServ</pre><p>The output should provide one or more IP addresses. If nothing is
returned, DHCP is not configured correctly.</p><p>To check your DHCP configuration, ensure that your DNS server specifies at one
least one host via the <tt>DNSserv</tt> option.</p><p>If the DNS server is alive, you can also check to see
if correct IP address is set up for the IPS repository that the
system is trying to contact. For example, run the following command to display
the IP address that your system has assigned for the <tt>opensolaris.org</tt> repository.</p><pre><tt>getent hosts opensolaris.org</tt></pre><p>The command output should display the correct IP address for the repository as
follows:</p><pre>72.5.123.5    opensolaris.org</pre><p>If no response is provided, check with your DNS network administrator.</p>

<a name="useproxy"></a><h5>Use Proxy to install</h5>
<p>In cases where DNS is not set up, an HTTP proxy can
be used to resolve the IPS repository name to an IP address and
complete the installation. The XML tag, <tt>&lt;ai_http_proxy></tt>, and value in the AI manifest can
contain the URL of the proxy as follows:</p><pre>&lt;ai_manifest name="http_proxy">
           ..........
           ..........
           &lt;ai_pkg_repo_default_publisher>
               &lt;main url="http://pkg.opensolaris.org" publisher="opensolaris.org"/>
           &lt;/ai_pkg_repo_default_publisher>
           &lt;ai_http_proxy url="€http://126.100.76.111:8080"€/>
&lt;/ai_manifest></pre>

<a name="more"></a><h5>Check Client Boot Errors</h5>
<p>Review the following additional information about errors that occur when the client system
is booting:</p>
<ul><li><p><a href="sparcclient.html#sparcerr">SPARC Network Booting Errors and Possible Causes</a></p></li>
<li><p><a href="x86client.html#x86err">x86 Network Booting Errors and Possible Causes</a></p></li>
<li><p><a href="bothclient.html">SPARC and x86 Client Installation Messages and Errors</a></p></li></ul>

         </div>
      </td>
   </tr>

   <tr class="PageControls" valign="top">
      <td></td>
      <td>
         <table width="100%">
      	   <tr>
      	     <td>
                 <a href="trouble.html">Previous</a>
             </td>
             <td align="right">
                 <a href="faq.html">Next</a>
             </td>
           </tr>
         </table>
      </td>
   </tr>
</tbody>
</table>


</body>
</html>

